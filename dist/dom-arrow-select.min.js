var domArrowSelect=function(){"use strict";function t(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function e(t,e){void 0===e&&(e=null);var r=Object.create(S);return r._records=Object.create(null),r.element="string"==typeof t?document.querySelector(t):t,e&&e.list.push(r),r}function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function n(){}function o(){for(var t=arguments,e=[],r=arguments.length;r--;)e[r]=t[r];var o=new n;return k.apply(void 0,[o].concat(e)),o}function i(t){return null!=t&&"object"==typeof t&&t.nodeType===Node.ELEMENT_NODE&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}function c(t){return t.getBoundingClientRect()}function l(t){return t.bottom-t.top}function u(t){return t.right-t.left}function s(t){return null!==t.offsetParent}function a(t,e,r){return s(e)?e:t[r](e)}function f(t,e,r){var n=document.elementFromPoint(e,r),o=n;if(n)for(var i=0;i<5;i++){if(!(n=o))return;if((o=n.parentNode)===t.parentNode)return n}}function h(t,e,r){void 0===r&&(r={});var n=r.range;void 0===n&&(n=1);var o=r.wrap;if(void 0===o&&(o=0),!i(t))throw new TypeError("element is not a DOM element. Instead element is equal to "+t+".");if(void 0===rt[e])throw new TypeError("direction should be up, down, left, or right. Instead direction is equal to "+e+".");if(et(n))throw new TypeError("options.range should be a number. Instead options.range is equal to "+n);return rt[e](t,n,o)}function p(t,e,r){void 0===r&&(r={});var n=r.xrange;void 0===n&&(n=10);var o=r.yrange;void 0===o&&(o=10);var i=r.depth;void 0===i&&(i=5);var c=r.reverse;void 0===c&&(c=!1);var l,u,s=ut,a=st;if(c&&(s=st,a=ut),-1!==s.indexOf(e)){var f=t.getBoundingClientRect();l=document.elementFromPoint(f.left+n,f.top+o)}else if(-1!==a.indexOf(e)){var h=t.getBoundingClientRect();l=document.elementFromPoint(h.right-n,h.bottom-o)}u=l;for(var p=0;p<i;p++){if(l=u,!u)return;if((u=u.parentNode)===t)return l}}function d(t){var e=typeof Element;return"object"===e||"function"===e?t instanceof Element:!!t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}function y(t,e){if(void 0===e&&(e=document),"string"==typeof t)try{return e.querySelector(t)}catch(t){throw t}if(d(t))return t;if(t&&"object"==typeof t){if(d(t.element))return t.element;if(d(t[0]))return t[0]}throw new TypeError("value ("+t+") in isElement(value)\n    is not an element, valid css selector,\n    or object with an element property, or index 0.")}function v(t,e){Object.defineProperty(t,e,{get:function(){return at[e]},enumerable:ft,configurable:ht})}function m(t){for(var e in at)t.hasOwnProperty(e)||v(t,e)}function b(t){for(var e in at)delete t[e]}function g(t){return vt[t]||null}var w=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,S=(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(e,r){for(var n,o,i=arguments,c=t(e),l=1;l<arguments.length;l++){n=Object(i[l]);for(var u in n)j.call(n,u)&&(c[u]=n[u]);if(w){o=w(n);for(var s=0;s<o.length;s++)O.call(n,o[s])&&(c[o[s]]=n[o[s]])}}return c})(Object.create(null),{on:function(t,e,r){return this.element.addEventListener(t,e,r),this._records[t]=this._records[t]||[],this._records[t].push([t,e,r]),this},off:function(t,e,r){if(this.element.removeEventListener(t,e,r),void 0!==this._records[t])for(var n=this._records[t],o=0;o<n.length;o++)n[o][1]===e&&n[o][2]===r&&(n.splice(o,1),o+1!==n.length&&--o);return this},dispatch:function(t){return this.element.dispatchEvent(t),this},clear:function(){var t=this;for(var e in t._records)t._records[e].forEach(function(e){(r=t).off.apply(r,e);var r});return this}});e.track=function(){return{list:[],clear:function(){this.list.forEach(function(t){t.clear()})}}};var N=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,k=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,o,i=arguments,c=r(t),l=1;l<arguments.length;l++){n=Object(i[l]);for(var u in n)E.call(n,u)&&(c[u]=n[u]);if(N){o=N(n);for(var s=0;s<o.length;s++)_.call(n,o[s])&&(c[o[s]]=n[o[s]])}}return c};n.prototype=function(){if("function"!=typeof Object.create){var t=new Object;return t.__proto__=null,t}return Object.create(null)}();var L=Object.prototype.toString,P=function(t){var e=L.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===L.call(t.callee)),r},T=Object.prototype.hasOwnProperty,$=Object.prototype.toString,A=Array.prototype.slice,x=Object.prototype.propertyIsEnumerable,I=!x.call({toString:null},"toString"),q=x.call(function(){},"prototype"),M=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],C=function(t){var e=t.constructor;return e&&e.prototype===t},D={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},F=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!D["$"+t]&&T.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{C(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),H=function(t){if("undefined"==typeof window||!F)return C(t);try{return C(t)}catch(t){return!1}},B=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===$.call(t),n=P(t),o=e&&"[object String]"===$.call(t),i=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var c=q&&r;if(o&&t.length>0&&!T.call(t,0))for(var l=0;l<t.length;++l)i.push(String(l));if(n&&t.length>0)for(var u=0;u<t.length;++u)i.push(String(u));else for(var s in t)c&&"prototype"===s||!T.call(t,s)||i.push(String(s));if(I)for(var a=H(t),f=0;f<M.length;++f)a&&"constructor"===M[f]||!T.call(t,M[f])||i.push(M[f]);return i};B.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(P(e)?A.call(e):e)}}}else Object.keys=B;return Object.keys||B};var K=B,R=Object.prototype.hasOwnProperty,W=Object.prototype.toString,X=function(t,e,r){if("[object Function]"!==W.call(e))throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var o=0;o<n;o++)e.call(r,t[o],o,t);else for(var i in t)R.call(t,i)&&e.call(r,t[i],i,t)},Y="function"==typeof Symbol&&"symbol"==typeof Symbol(),z=Object.prototype.toString,G=function(t){return"function"==typeof t&&"[object Function]"===z.call(t)},J=Object.defineProperty&&function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(t){return!1}}(),Q=function(t,e,r,n){(!(e in t)||G(n)&&n())&&(J?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},U=function(t,e){var r=arguments.length>2?arguments[2]:{},n=K(e);Y&&(n=n.concat(Object.getOwnPropertySymbols(e))),X(n,function(n){Q(t,n,e[n],r[n])})};U.supportsDescriptors=!!J;var V=U,Z=function(t){return t!==t},tt=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Z};V(Z,{getPolyfill:tt,implementation:Z,shim:function(){var t=tt();return V(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var et=Z,rt=o({left:function(t,e,r){void 0===r&&(r=0);var n=c(t),o=n.left-e,i=n.top+l(n)/2,u=f(t,o,i);if(u)return a(this,u,"left");if(r){var s=f(t,o=c(t.parentNode).right-r,i);if(s)return a(this,s,"left")}},up:function(t,e,r){void 0===r&&(r=0);var n=c(t),o=n.left+u(n)/2,i=n.top-e,l=f(t,o,i);if(l)return a(this,l,"up");if(r){var s=f(t,o,i=c(t.parentNode).bottom-r);if(s)return a(this,s,"up")}},right:function(t,e,r){void 0===r&&(r=0);var n=c(t),o=n.right+e,i=n.top+l(n)/2,u=f(t,o,i);if(u)return a(this,u,"right");if(r){var s=f(t,o=c(t.parentNode).left+r,i);if(s)return a(this,s,"right")}},down:function(t,e,r){void 0===r&&(r=0);var n=c(t),o=n.left+u(n)/2,i=n.bottom+e,l=f(t,o,i);if(l)return a(this,l,"down");if(r){var s=f(t,o,i=c(t.parentNode).top+r);if(s)return a(this,s,"down")}}}),nt="undefined"!=typeof Element?Element.prototype:{},ot=nt.matches||nt.matchesSelector||nt.webkitMatchesSelector||nt.mozMatchesSelector||nt.msMatchesSelector||nt.oMatchesSelector,it=function(t,e){if(!t||1!==t.nodeType)return!1;if(ot)return ot.call(t,e);for(var r=t.parentNode.querySelectorAll(e),n=0;n<r.length;n++)if(r[n]==t)return!0;return!1},ct=function(){var t=function(t){return"function"==typeof t},e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,n=function(t){var n=e(t);return Math.min(Math.max(n,0),r)},o=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(typeof t)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},i=function(e,r){if(null!=e&&null!=r){var n=e[r];if(null==n)return;if(!t(n))throw new TypeError(n+" is not a function");return n}},c=function(t){var e=t.next();return!Boolean(e.done)&&e};return function(e){var r,l=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!t(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}var s,a,f=i(e,o(e));if(void 0!==f){s=t(l)?Object(new l):[];var h=f.call(e);if(null==h)throw new TypeError("Array.from requires an array-like or iterable object");a=0;for(var p,d;;){if(!(p=c(h)))return s.length=a,s;d=p.value,s[a]=u?u.call(r,d,a):d,a++}}else{var y=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var v=n(y.length);s=t(l)?Object(new l(v)):new Array(v),a=0;for(var m;a<v;)m=y[a],s[a]=u?u.call(r,m,a):m,a++;s.length=v}return s}}(),lt="function"==typeof Array.from?Array.from:ct,ut=["up","left",-1],st=["down","right",1],at=o({ctrl:!1,shift:!1,alt:!1,key:null,keyCode:null,which:null}),ft=!0,ht=!0;document.addEventListener("keydown",function(t){at.ctrl=t.metaKey||t.ctrlKey,at.shift=t.shiftKey,at.alt=t.altKey,at.keyCode=at.which=t.which||t.keyCode,at.key=t.key}),document.addEventListener("keyup",function(t){at.ctrl=at.shift=at.alt=!1,at.key=at.keyCode=at.which=null});var pt=function(t,e,r){void 0===r&&(r=null),this.name=t,this.matchListener=this.listener=e,null!==r&&(this.matchListener=r)},dt=function(t){this.listeners={},this.__context=void 0===t?this:t};dt.prototype.addListener=function(t,e,r){return void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(new pt(t,e,r)),this},dt.prototype.removeListener=function(t,e){var r=this;if(void 0===this.listeners[t]||!this.listeners[t].length)return this;for(var n=0;n<this.listeners[t].length;n++)r.listeners[t][n].matchListener===e&&(r.listeners[t].splice(n,1),--n);return this},dt.prototype.emitListeners=function(t){for(var e=arguments,r=this,n=[],o=arguments.length-1;o-- >0;)n[o]=e[o+1];if(void 0!==this.listeners[t]&&this.listeners[t].length){for(var i=0;i<this.listeners[t].length;i++)r.listeners[t][i].listener.apply(r.__context,n);return this}},dt.prototype.removeAll=function(t){delete this.listeners[t]},dt.prototype.dispose=function(){this.listeners=this.__context=null};var yt=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.on=function(t,e){return this.addListener(t,e)},e.prototype.off=function(t,e){return this.removeListener(t,e)},e.prototype.one=function(t,e){return this.on(t,onceListener)},e.prototype.emit=function(t){for(var e=arguments,r=[],n=arguments.length-1;n-- >0;)r[n]=e[n+1];return(o=this).emitListeners.apply(o,[t].concat(r));var o},e.prototype.clear=function(t){this.removeAll(t)},e}(dt),vt=o({37:"left",38:"up",39:"right",40:"down"}),mt=function(t){function r(r){var n=this;void 0===r&&(r={});var o=r.selectID;void 0===o&&(o="dom-arrow-select-selected");var i=r.selected;void 0===i&&(i=function(t,e){this.unSelect(e),this.select(t)});var c=r.outside;void 0===c&&(c=function(){});var l=r.step;void 0===l&&(l=function(){});var u=r.classList;void 0===u&&(u=function(t){return t.classList}),t.call(this),this.element=null,this.current=null,this._selected=i,this._outside=c,this._classList=u,this._step=function(t){return l.call(this,t)||{}},Object.defineProperty(this,"selectID",{value:o,enumerable:!0}),m(this);var s=this.tracker=e.track();e(document,s).on("keydown",function(t){var e=n.element,r=g(t.which||t.keyCode);r&&e&&e.parentNode&&n.step(r)}),e(document,s).on("mousedown",function(t){it(t.target,"."+o)&&(n.emit("pointerdown",t.target),t.stopPropagation())}),e(document,s).on("keyup",function(t){if(13===(t.which||t.keyCode)){if(n.element.offsetHeight){var e=n.element.querySelectorAll("."+o);e&&e.length&&n.emit("focusenter",lt(e))}var r=document.querySelectorAll("."+o);r&&r.length&&n.emit("enter",lt(r))}}),this.destroy=function(){s.clear(),b(this)}}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.step=function(t){var e=this.element,r=(this.current,null),n=this,o=n._step,i=n._selected,c=n._outside,l=o.call(this,t);return(r=this.current?h(this.current,t,l):p(e,t,{reverse:!0,xrange:l.wrap,yrange:l.wrap}))?i.call(this,r,this.current):c.call(this,this.current,t),this},r.prototype.focus=function(t){return t?(this.element=y(t),this):(this.element=t,this)},r.prototype.focused=function(t){if(!t)return!1;var e=y(t);return this.element===e},r.prototype.swap=function(t,e){return"string"!=typeof e?this.unSelectAll().focus(t):this.unSelectAll().focus(t).step(e)},r.prototype.unSelect=function(t){if(null===t)return this;if(!this.element)return this;if(t=y(t,this.element)){if(t.parentNode!==this.element)throw new TypeError(t.outerHTML+" is not a child of "+this.element.outerHTML);this._classList(t).remove(this.selectID),this.current===t&&(this.current=null)}return this},r.prototype.select=function(t){if(null===t)return this;if(!this.element)return this;if((t=y(t,this.element)).parentNode!==this.element)throw new TypeError(t.outerHTML+" is not a child of "+this.element.outerHTML);return t!==this.current&&(this._classList(t).add(this.selectID),this.current=t),this},r.prototype.unSelectAll=function(){var t=this;return this.element?(lt(this.element.querySelectorAll("."+this.selectID)).forEach(function(e){t.unSelect(e)}),this.current=null,this):this},r.prototype.selectAll=function(){var t=this;if(!this.element)return this;for(var e=this.element.children,r=0;r<e.length;r++)t.select(e[r]);return this.current=e[e.length-1],this},r.prototype.selectIndex=function(t){return this.element?(t<0&&(t=this.element.children.length+t),this.select(this.element.children[t]),this):this},r.prototype.unSelectIndex=function(t){return this.element?(t<0&&(t=this.element.children.length+t),this.unSelect(this.element.children[t]),this):this},r}(yt);return function(t,e){return new mt(t,e)}}();
//# sourceMappingURL=dom-arrow-select.min.js.map
