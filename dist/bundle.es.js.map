{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import events from 'dom-eve';\nimport domStep from 'dom-step';\n\nlet keySet = {\n    '37': 'left',\n    '38': 'up',\n    '39': 'right',\n    '40': 'down'\n};\n\nfunction getKey(keyCode){\n    return keySet[keyCode] || null;\n}\n\nclass DOMArrowSelect {\n    constructor(element, {\n        step = {},\n        selected = null,\n        range = 1,\n        wrap = 5\n    } = {}){\n\n        ['down', 'up', 'left', 'right'].forEach(key=>{\n            step[key] = step[key] || {};\n            step[key].range = step[key].range || range;\n            step[key].wrap = step[key].wrap || wrap;\n        });\n\n        this.step = step;\n\n        const tracker = this.tracker = events.track();\n\n        console.log('step ',step)\n\n        events(document, tracker).on('keyup', event=>{\n\n            try{\n                let key = getKey(event.which || event.keyCode);\n\n                if(key){\n                    let el = element.querySelector('.'+selected);\n                    let next = null;\n                    if(!el){\n                        if(['down', 'right'].indexOf(key) !== -1){\n                            let rect = element.getBoundingClientRect();\n                            next = document.elementFromPoint(\n                                rect.left + 10,\n                                rect.top + 10\n                            );\n                        }else if(['up', 'left'].indexOf(key) !== -1){\n                            let rect = element.getBoundingClientRect();\n                            next = document.elementFromPoint(\n                                rect.right - 10,\n                                rect.bottom - 10\n                            );\n                        }\n                    }else{\n                        console.log('stepping')\n                        next = domStep(el, key, this.step[key]);\n                    }\n\n                    console.log('el ',el)\n                    console.log('next ',next);\n\n                    if(next){\n                        if(el){\n                            el.classList.remove(selected);\n                        }\n                        next.classList.add(selected);\n                    }\n                }\n\n            }catch(e){ console.log(e)}\n\n        });\n\n        this.destroy = function(){\n            tracker.clear();\n        };\n    }\n}\n\nexport default function arrowSelect(element, options){\n    return new DOMArrowSelect(element, options);\n}\n"],"names":["let","rect","this"],"mappings":"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"}