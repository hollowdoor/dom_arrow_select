{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["import events from 'dom-eve';\nimport domStep from 'dom-step';\n\nlet keySet = {\n    '37': 'left',\n    '38': 'up',\n    '39': 'right',\n    '40': 'down'\n};\n\nfunction getKey(keyCode){\n    return keySet[keyCode] || null;\n}\n\nfunction stepOption(opts, options, step, self){\n    opts[step] = {};\n    let range = options.range;\n    let wrap = options.wrap;\n    Object.defineProperties(opts[step], {\n        range: {\n            set(v){\n                range = v;\n            },\n            get(){\n                return range || self.range;\n            }\n        },\n        wrap: {\n            set(v){\n                wrap = v;\n            },\n            get(){\n                return wrap || self.wrap;\n            }\n        }\n    });\n    return opts;\n}\n\nfunction createStepOptions(options, self){\n    let opts = {};\n    stepOption(opts, options, 'down', self);\n    stepOption(opts, options, 'up', self);\n    stepOption(opts, options, 'left', self);\n    stepOption(opts, options, 'right', self);\n    return options;\n}\n\nclass DOMArrowSelect {\n    constructor(element, {\n        step = {},\n        selected = null,\n        range = 1,\n        wrap = 5\n    } = {}){\n\n        this.range = range;\n        this.wrap = wrap;\n\n        this.step = createStepOptions(step, this);\n\n        const tracker = this.tracker = events.track();\n\n        events(document, tracker).on('keyup', event=>{\n\n            try{\n                let key = getKey(event.which || event.keyCode);\n\n                if(key){\n                    let el = element.querySelector('.'+selected);\n                    let next = null;\n                    if(!el){\n                        if(['down', 'right'].indexOf(key) !== -1){\n                            let rect = element.getBoundingClientRect();\n                            next = document.elementFromPoint(\n                                rect.left + 10,\n                                rect.top + 10\n                            );\n                        }else if(['up', 'left'].indexOf(key) !== -1){\n                            let rect = element.getBoundingClientRect();\n                            next = document.elementFromPoint(\n                                rect.right - 10,\n                                rect.bottom - 10\n                            );\n                        }\n                    }else{\n                        next = domStep(el, key, this.step[key]);\n                    }\n\n                    if(next){\n                        if(el){\n                            el.classList.remove(selected);\n                        }\n                        next.classList.add(selected);\n                    }\n                }\n\n            }catch(e){ console.log(e)}\n\n        });\n\n        this.destroy = function(){\n            tracker.clear();\n        };\n    }\n}\n\nexport default function arrowSelect(element, options){\n    return new DOMArrowSelect(element, options);\n}\n"],"names":["let","rect","this"],"mappings":";;;;;;;AAGAA,IAAI,MAAM,GAAG;IACT,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,IAAI;IACV,IAAI,EAAE,OAAO;IACb,IAAI,EAAE,MAAM;CACf,CAAC;;AAEF,SAAS,MAAM,CAAC,OAAO,CAAC;IACpB,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;CAClC;;AAED,SAAS,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC;IAC1C,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;IAChBA,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;IAC1BA,IAAI,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;IACxB,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QAChC,KAAK,EAAE;YACH,GAAG,cAAA,CAAC,CAAC,CAAC;gBACF,KAAK,GAAG,CAAC,CAAC;aACb;YACD,GAAG,cAAA,EAAE;gBACD,OAAO,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC;aAC9B;SACJ;QACD,IAAI,EAAE;YACF,GAAG,cAAA,CAAC,CAAC,CAAC;gBACF,IAAI,GAAG,CAAC,CAAC;aACZ;YACD,GAAG,cAAA,EAAE;gBACD,OAAO,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC;aAC5B;SACJ;KACJ,CAAC,CAAC;IACH,OAAO,IAAI,CAAC;CACf;;AAED,SAAS,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC;IACrCA,IAAI,IAAI,GAAG,EAAE,CAAC;IACd,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IACxC,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IACtC,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IACxC,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IACzC,OAAO,OAAO,CAAC;CAClB;;AAED,IAAM,cAAc,GAAC,uBACN,CAAC,OAAO,EAAE,GAAA,CAKd;sBAAN;6BAAA,GAAG,EAAE,CAJK;uDAAA,EAAE,CACE;uEAAA,IAAI,CACP;2DAAA,CAAC,CACF;uDAAA,CAAC;;;IAGZ,IAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;IACvB,IAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;;IAErB,IAAQ,CAAC,IAAI,GAAG,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;IAE9C,IAAU,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;;IAElD,MAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAA,KAAK,CAAA;;QAE3C,GAAO;YACH,IAAQ,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;;YAEnD,GAAO,GAAG,CAAC;gBACP,IAAQ,EAAE,GAAG,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBACjD,IAAQ,IAAI,GAAG,IAAI,CAAC;gBACpB,GAAO,CAAC,EAAE,CAAC;oBACP,GAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;wBACzC,IAAQ,IAAI,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;wBAC/C,IAAQ,GAAG,QAAQ,CAAC,gBAAgB;4BAChC,IAAQ,CAAC,IAAI,GAAG,EAAE;4BAClB,IAAQ,CAAC,GAAG,GAAG,EAAE;yBAChB,CAAC;qBACL,KAAK,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;wBAC5C,IAAQC,MAAI,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;wBAC/C,IAAQ,GAAG,QAAQ,CAAC,gBAAgB;4BAChC,MAAQ,CAAC,KAAK,GAAG,EAAE;4BACnB,MAAQ,CAAC,MAAM,GAAG,EAAE;yBACnB,CAAC;qBACL;iBACJ,IAAI;oBACL,IAAQ,GAAG,OAAO,CAAC,EAAE,EAAE,GAAG,EAAEC,MAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;iBAC3C;;gBAEL,GAAO,IAAI,CAAC;oBACR,GAAO,EAAE,CAAC;wBACN,EAAM,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;qBACjC;oBACL,IAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;iBAChC;aACJ;;SAEJ,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC;;KAE7B,CAAC,CAAC;;IAEP,IAAQ,CAAC,OAAO,GAAG,UAAU;QACzB,OAAW,CAAC,KAAK,EAAE,CAAC;KACnB,CAAC;CACL,CAAA;;AAGL,AAAe,SAAS,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC;IACjD,OAAO,IAAI,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;CAC/C;;;;"}